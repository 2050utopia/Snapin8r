<!DOCTYPE html>
<html>
	<head>
		<title>Snapin8r</title>
		<script src="snapin8r.min.js"></script>
		<script>
			window.addEventListener("load", function() {
				var dropzone = document.getElementById("dropzone");
				function handleDrop(e) {
					this.style.borderColor = "#eee";
					e.stopPropagation(); // Stops some browsers from redirecting.
					e.preventDefault();

					var file = e.dataTransfer.files[0];
					var reader = new FileReader();
					reader.onload = function(e) {
						try {
							var zip = new JSZip(e.target.result);
							var l = document.createElement("a");
							l.href = "http://snap.berkeley.edu/snapsource/snap.html#open:"
								+ encodeURIComponent(Snapin8r(zip, file.name.replace(".sb2", "")));
							l.innerHTML = "Believe it or not, it worked. Click here to open your project!";
							l.style.color = "green";
							dropzone.style.backgroundColor = "#aea";
							while (dropzone.firstChild) {
								dropzone.removeChild(dropzone.firstChild);
							}
							dropzone.appendChild(l);
						} catch (err) {
							var l = document.createElement("span");
							l.innerHTML = "Well, this is embarassing.<br/>The ancient geekish runes read: <code>"+err+"</code> Chances are, you use a special Scratch feature that we don't know how to convert. Sorry! You can help us out by reporting this error.";
							l.style.color = "#300";
							dropzone.style.backgroundColor = "#eaa";
							while (dropzone.firstChild) {
								dropzone.removeChild(dropzone.firstChild);
							}
							dropzone.appendChild(l);
						}
					}
					reader.readAsArrayBuffer(file);
				}
				function handleDragEnter(e) {
					this.style.borderColor = "orange";
				}
				function hangleDragOver(e) {
					if (e.preventDefault) {
						e.preventDefault();
					}
				}
				function handleDragLeave(e) {
					this.style.borderColor = "#eee";
				}
				dropzone.addEventListener("drop", handleDrop, false);

				dropzone.addEventListener('dragenter', handleDragEnter, false);
				dropzone.addEventListener('dragleave', handleDragLeave, false);
				dropzone.addEventListener('dragover', hangleDragOver, false);
			}, false);
		</script>
		<style>
			html {
				padding:0px;
				height: 100%;
			}
            * {
                box-sizing: border-box;
            }
			body {
				padding: 0px;
				margin: 0px;
				height: 100%;
				font-family: sans-serif;
			}
			#wrapper {
				width:100%;
				height: 100%;
			}
			#left-column {
				width:40%;
				padding: 10px;
				overflow-y:scroll;
				float:left;
				display: table;
			}
			#right-column {
				padding:0px;
				float: left;
				width: 60%;
				height: 100%;
				padding:10px;
				display: table;
			}

			#dropzone {
				border-style: dashed;
				border-radius: 30px;
				border-color: #eee;
				height: 100%;
				text-align: center;
				display: table-cell;
				vertical-align: middle;
				color:#aaa;
				padding: 10px;
			}
			p {
				text-indent: 10px;
			}
			h1 {
				text-align: center;
			}
		</style>
	</head>
	<body>
		<div id="wrapper">
			<div id="left-column">
				<h1>Snapin8r</h1>
                <p><strong>Snapin8r</strong> converts a subset <a
                href="http://scratch.mit.edu">Scratch 2.0</a> projects to <a
                href="http://snap.berkeley.edu">Snap!</a> projects. This page
                lets you use the current development version of Snapin8r to
                convert your projects.

                <p>Snapin8r can't convert projects that use Scratch specific
                features, specifically cloud variables, the username reporter,
                and certain unsupported blocks. Furthermore, being on the
                bleeding edge means that you might get errors in conversion
                because of unresolved bugs&mdash;please report these to <a
                href="http://scratch.mit.edu/users/Hardmath123">@Hardmath123</a>
                on Scratch or <a
                href="https://github.com/Hardmath123/Snapin8r/issues">on
                Github</a>

                <p>Snapin8r didn't work? Try <a
                href="http://dylan.cf/Snapin8r2/">Snapin8r2</a> by
                <strong>djdolphin</strong>: it's a complete rewrite with more
                features and bugfixes.

			</div>

			<div id="right-column">
				<div id="dropzone">
					Drop an <code>sb2</code> file here&hellip;
				</div>
			</div>
		</div>
	</body>
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-46120535-2', 'hardmath123.github.io');
	  ga('send', 'pageview');

	</script>
</html>
